(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{463:function(t,s,a){t.exports=a.p+"assets/img/ch02_f09.cf373a0c.png"},515:function(t,s,a){"use strict";a.r(s);var n=a(2),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("p",[t._v("è¿™æ˜¯è¯¥ç³»åˆ—çš„ç¬¬äºŒç¯‡æ–‡ç« ï¼š"),s("RouterLink",{attrs:{to:"/blogs/2022/exploring-dotnet-6/"}},[t._v("æŽ¢ç´¢ .NET 6")]),t._v("ã€‚")],1),t._v(" "),s("p",[t._v('æœ‰ä¸€ç§æ–°çš„"é»˜è®¤"æ–¹å¼å¯ä»¥åœ¨.NET ä¸­æž„å»ºåº”ç”¨ç¨‹åºï¼Œä½¿ç”¨ '),s("code",[t._v("WebApplication.CreateBuilder()")]),t._v("ã€‚åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å°†è¿™ç§æ–¹æ³•ä¸Žä»¥å‰çš„æ–¹æ³•è¿›è¡Œæ¯”è¾ƒï¼Œè®¨è®ºè¿›è¡Œæ›´æ”¹çš„åŽŸå› ï¼Œå¹¶æŸ¥çœ‹å…¶å½±å“ã€‚åœ¨ä¸‹ä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å°†ä»‹ç» "),s("code",[t._v("WebApplication")]),t._v(" å’Œ "),s("code",[t._v("WebApplicationBuilder")]),t._v(" èƒŒåŽçš„ä»£ç ï¼Œä»¥äº†è§£å®ƒä»¬çš„å·¥ä½œåŽŸç†ã€‚")]),t._v(" "),s("h2",{attrs:{id:"æž„å»º-asp-net-æ ¸å¿ƒåº”ç”¨ç¨‹åº-åŽ†å²è¯¾"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æž„å»º-asp-net-æ ¸å¿ƒåº”ç”¨ç¨‹åº-åŽ†å²è¯¾"}},[t._v("#")]),t._v(" æž„å»º ASP.NET æ ¸å¿ƒåº”ç”¨ç¨‹åºï¼šåŽ†å²è¯¾")]),t._v(" "),s("p",[t._v('åœ¨æˆ‘ä»¬çœ‹.NET 6 ä¹‹å‰ï¼Œæˆ‘è®¤ä¸ºå€¼å¾—çœ‹çœ‹ ASP.NET Core åº”ç”¨ç¨‹åºçš„"å¼•å¯¼"è¿‡ç¨‹åœ¨è¿‡åŽ»å‡ å¹´ä¸­æ˜¯å¦‚ä½•æ¼”å˜çš„ï¼Œå› ä¸ºæœ€åˆçš„è®¾è®¡å¯¹æˆ‘ä»¬ä»Šå¤©æ‰€å¤„çš„ä½ç½®äº§ç”Ÿäº†å·¨å¤§çš„å½±å“ã€‚å½“æˆ‘ä»¬åœ¨ä¸‹ä¸€ç¯‡æ–‡ç« ä¸­æŸ¥çœ‹'),s("code",[t._v("WebApplicationBuilder")]),t._v("èƒŒåŽçš„ä»£ç æ—¶ï¼Œè¿™å°†å˜å¾—æ›´åŠ æ˜Žæ˜¾ï¼")]),t._v(" "),s("p",[t._v("å³ä½¿æˆ‘ä»¬å¿½ç•¥ .NET Core 1.xï¼ˆæ­¤æ—¶å®Œå…¨ä¸å—æ”¯æŒï¼‰ï¼Œæˆ‘ä»¬ä¹Ÿæœ‰ä¸‰ç§ä¸åŒçš„èŒƒä¾‹æ¥é…ç½® ASP.NET Core åº”ç”¨ç¨‹åºï¼š")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("WebHost.CreateDefaultBuilder()")]),t._v('ï¼šä»Ž ASP.NET Core 2.x å¼€å§‹é…ç½® ASP.NET Core åº”ç”¨ç¨‹åºçš„"åŽŸå§‹"æ–¹æ³•ã€‚')]),t._v(" "),s("li",[s("code",[t._v("Host.CreateDefaultBuilder()")]),t._v("ï¼šåœ¨"),s("a",{attrs:{href:"https://docs.microsoft.com/en-us/aspnet/core/fundamentals/host/generic-host?view=aspnetcore-3.1",target:"_blank",rel:"noopener noreferrer"}},[t._v("é€šç”¨ä¸»æœºä¹‹ä¸Šé‡æ–°æž„å»º ASP.NET Core"),s("OutboundLink")],1),t._v("ï¼Œæ”¯æŒå…¶ä»–å·¥ä½œè´Ÿè½½ï¼Œå¦‚ Worker æœåŠ¡ã€‚.NET Core 3.x å’Œ .NET 5 ä¸­çš„é»˜è®¤æ–¹æ³•ã€‚")]),t._v(" "),s("li",[s("code",[t._v("WebApplication.CreateBuilder()")]),t._v("ï¼š.NET 6 ä¸­çš„æ–°çƒ­ç‚¹ã€‚")])]),t._v(" "),s("p",[t._v('ä¸ºäº†æ›´å¥½åœ°äº†è§£è¿™äº›å·®å¼‚ï¼Œæˆ‘åœ¨ä»¥ä¸‹å„èŠ‚ä¸­é‡çŽ°äº†å…¸åž‹çš„"å¯åŠ¨"ä»£ç ï¼Œè¿™åº”è¯¥ä½¿ .NET 6 ä¸­çš„æ›´æ”¹æ›´åŠ æ˜Žæ˜¾ã€‚')]),t._v(" "),s("h2",{attrs:{id:"asp-net-core-2-x-webhost-createdefaultbuilder"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#asp-net-core-2-x-webhost-createdefaultbuilder"}},[t._v("#")]),t._v(" ASP.NET Core 2.x: WebHost.CreateDefaultBuilder()")]),t._v(" "),s("p",[t._v('åœ¨ ASP.NET Core 1.x çš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬ä¸­ï¼ˆå¦‚æžœæˆ‘æ²¡è®°é”™çš„è¯ï¼‰ï¼Œæ²¡æœ‰"é»˜è®¤"ä¸»æœºçš„æ¦‚å¿µã€‚ASP.NET Core çš„ä¸€ä¸ªæ„è¯†å½¢æ€æ˜¯ï¼Œä¸€åˆ‡éƒ½åº”è¯¥"ä¸ºæ¸¸æˆä»˜è´¹"ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æžœä½ ä¸éœ€è¦ä½¿ç”¨å®ƒï¼Œä½ å°±ä¸åº”è¯¥ä¸ºé‚£é‡Œçš„åŠŸèƒ½ä»˜å‡ºä»£ä»·ã€‚')]),t._v(" "),s("p",[t._v('åœ¨å®žè·µä¸­ï¼Œè¿™æ„å‘³ç€"å…¥é—¨"æ¨¡æ¿åŒ…å«å¤§é‡æ ·æ¿å’Œå¤§é‡ NuGet åŒ…ã€‚ä¸ºäº†æŠµæ¶ˆçœ‹åˆ°æ‰€æœ‰è¿™äº›ä»£ç åªæ˜¯ä¸ºäº†å…¥é—¨è€Œæ„Ÿåˆ°éœ‡æƒŠï¼ŒASP.NET Core å¼•å…¥äº†'),s("code",[t._v("WebHost.CreateDefaultBuilder()")]),t._v("ã€‚è¿™å°†ä¸ºæ‚¨è®¾ç½®ä¸€å¤§å †é»˜è®¤å€¼ï¼Œåˆ›å»ºä¸€ä¸ª "),s("code",[t._v("IWebHostBuilder")]),t._v("ï¼Œå¹¶æž„å»ºä¸€ä¸ª "),s("code",[t._v("IWebHost")]),t._v("ã€‚")]),t._v(" "),s("blockquote",[s("p",[s("a",{attrs:{href:"https://andrewlock.net/exploring-program-and-startup-in-asp-net-core-2-preview1-2/",target:"_blank",rel:"noopener noreferrer"}},[t._v("æ—©åœ¨ 2017 å¹´ï¼Œæˆ‘å°±ç ”ç©¶äº† "),s("code",[t._v("WebHost.CreateDefaultBuilder()")]),t._v(" çš„ä»£ç ï¼Œå¹¶å°†å…¶ä¸Ž ASP.NET Core 1.x è¿›è¡Œäº†æ¯”è¾ƒ"),s("OutboundLink")],1),t._v("ï¼Œä»¥é˜²ä¸‡ä¸€ä½ è§‰å¾—åƒä¸€ä¸ªè®°å¿†ä¹‹æ—…ã€‚")])]),t._v(" "),s("p",[t._v('ä»Žä¸€å¼€å§‹ï¼ŒASP.NET Core å°±å°†"ä¸»æœº"å¼•å¯¼ä¸Ž"åº”ç”¨ç¨‹åº"å¼•å¯¼åˆ†å¼€ã€‚ä»ŽåŽ†å²ä¸Šçœ‹ï¼Œè¿™è¡¨çŽ°ä¸ºåœ¨ä¸¤ä¸ªæ–‡ä»¶ï¼ˆä¼ ç»Ÿä¸Šç§°ä¸º '),s("em",[t._v("Program.cs")]),t._v(" å’Œ "),s("em",[t._v("Startup.cs")]),t._v("ï¼‰ä¹‹é—´æ‹†åˆ†å¯åŠ¨ä»£ç ã€‚")]),t._v(" "),s("p",[s("img",{attrs:{src:a(463),alt:"img"}})]),t._v(" "),s("center",[s("i",[t._v('ç¨‹åºå’Œå¯åŠ¨çš„é…ç½®èŒƒå›´å·®å¼‚ã€‚ç¨‹åºå…³æ³¨çš„åŸºç¡€ç»“æž„é…ç½®é€šå¸¸åœ¨é¡¹ç›®çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸä¸­ä¿æŒç¨³å®šã€‚ç›¸åï¼Œæ‚¨é€šå¸¸ä¼šä¿®æ”¹"å¯åŠ¨"ä»¥æ·»åŠ æ–°åŠŸèƒ½å¹¶æ›´æ–°åº”ç”¨ç¨‹åºè¡Œä¸ºã€‚')])]),t._v(" "),s("p",[t._v("åœ¨ ASP.NET Core 2.1ä¸­ï¼Œ"),s("em",[t._v("Program.cs")]),t._v("è°ƒç”¨"),s("code",[t._v("WebHost.CreateDefaultBuilder()")]),t._v("ï¼Œå®ƒè®¾ç½®åº”ç”¨ç¨‹åºé…ç½®ï¼ˆä¾‹å¦‚ä»Ž"),s("em",[t._v("appsettings.json")]),t._v("åŠ è½½ï¼‰ï¼Œæ—¥å¿—è®°å½•å¹¶é…ç½®Kestrelå’Œ/æˆ–IISé›†æˆã€‚")]),t._v(" "),s("div",{staticClass:"language-csharp line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-csharp"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Program")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token return-type class-name"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("string")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")])]),t._v(" args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("BuildWebHost")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Run")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token return-type class-name"}},[t._v("IWebHost")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("BuildWebHost")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("string")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")])]),t._v(" args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v("\n        WebHost"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("CreateDefaultBuilder")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token generic-method"}},[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("UseStartup")]),s("span",{pre:!0,attrs:{class:"token generic class-name"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("Startup"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Build")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br")])]),s("p",[t._v("é»˜è®¤æ¨¡æ¿è¿˜å¼•ç”¨"),s("code",[t._v("Startup")]),t._v("ç±»ã€‚æ­¤ç±»ä¸æ˜¾å¼å®žçŽ°æŽ¥å£ã€‚ç›¸åï¼Œ"),s("code",[t._v("IWebHostBuilder")]),t._v(" å®žçŽ°çŸ¥é“è¦æŸ¥æ‰¾ "),s("code",[t._v("ConfigureServices")]),t._v("() å’Œ "),s("code",[t._v("Configure")]),t._v("() æ–¹æ³•æ¥åˆ†åˆ«è®¾ç½®ä¾èµ–å…³ç³»æ³¨å…¥å®¹å™¨å’Œä¸­é—´ä»¶ç®¡é“ã€‚")]),t._v(" "),s("div",{staticClass:"language-csharp line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-csharp"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Startup")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Startup")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IConfiguration")]),t._v(" configuration"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        Configuration "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" configuration"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token return-type class-name"}},[t._v("IConfiguration")]),t._v(" Configuration "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token return-type class-name"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ConfigureServices")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IServiceCollection")]),t._v(" services"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        services"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("AddMvc")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ­¤æ–¹æ³•ç”±è¿è¡Œæ—¶è°ƒç”¨ã€‚ä½¿ç”¨æ­¤æ–¹æ³•é…ç½® HTTP è¯·æ±‚ç®¡é“ã€‚")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token return-type class-name"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Configure")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IApplicationBuilder")]),t._v(" app"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IHostingEnvironment")]),t._v(" env"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("env"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("IsDevelopment")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            app"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("UseDeveloperExceptionPage")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n        app"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("UseStaticFiles")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        app"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("UseMvc")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("routes "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            routes"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("MapRoute")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token named-parameter punctuation"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"default"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token named-parameter punctuation"}},[t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"{controller=Home}/{action=Index}/{id?}"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br"),s("span",{staticClass:"line-number"},[t._v("30")]),s("br"),s("span",{staticClass:"line-number"},[t._v("31")]),s("br")])]),s("p",[t._v("åœ¨ä¸Šé¢çš„ "),s("code",[t._v("Startup")]),t._v(" ç±»ä¸­ï¼Œæˆ‘ä»¬å°† MVC æœåŠ¡æ·»åŠ åˆ°å®¹å™¨ï¼Œæ·»åŠ å¼‚å¸¸å¤„ç†å’Œé™æ€æ–‡ä»¶ä¸­é—´ä»¶ï¼Œç„¶åŽæ·»åŠ  MVC ä¸­é—´ä»¶ã€‚MVC ä¸­é—´ä»¶æ˜¯æœ€åˆæž„å»ºåº”ç”¨ç¨‹åºçš„å”¯ä¸€çœŸæ­£å®žç”¨çš„æ–¹æ³•ï¼Œå®ƒæ—¢é€‚ç”¨äºŽæœåŠ¡å™¨å‘ˆçŽ°çš„è§†å›¾ï¼Œä¹Ÿé€‚ç”¨äºŽ RESTful API ç«¯ç‚¹ã€‚")]),t._v(" "),s("h2",{attrs:{id:"asp-net-core-3-x-5-é€šç”¨ä¸»æœºæž„å»ºå™¨"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#asp-net-core-3-x-5-é€šç”¨ä¸»æœºæž„å»ºå™¨"}},[t._v("#")]),t._v(" ASP.NET Core 3.x/5ï¼šé€šç”¨ä¸»æœºæž„å»ºå™¨")]),t._v(" "),s("p",[t._v('ASP.NET Core 3.xä¸º ASP.NET Coreçš„å¯åŠ¨ä»£ç å¸¦æ¥äº†ä¸€äº›é‡å¤§å˜åŒ–ã€‚ä»¥å‰ï¼ŒASP.NET Coreåªèƒ½çœŸæ­£ç”¨äºŽWeb / HTTPå·¥ä½œè´Ÿè½½ï¼Œä½†åœ¨.NET Core 3.xä¸­ï¼Œå·²ç»è¿›è¡Œäº†ä¸€é¡¹è¿ç§»ä»¥æ”¯æŒå…¶ä»–æ–¹æ³•ï¼šé•¿æ—¶é—´è¿è¡Œçš„"å·¥ä½œçº¿ç¨‹æœåŠ¡"ï¼ˆä¾‹å¦‚ï¼Œç”¨äºŽä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—ï¼‰ï¼ŒgRPCæœåŠ¡ï¼ŒWindowsæœåŠ¡ç­‰ã€‚ç›®æ ‡æ˜¯ä¸Žè¿™äº›å…¶ä»–åº”ç”¨ç±»åž‹å…±äº«ä¸“é—¨ä¸ºæž„å»º Web åº”ç”¨ï¼ˆé…ç½®ã€æ—¥å¿—è®°å½•ã€DIï¼‰è€Œæž„å»ºçš„åŸºæœ¬æ¡†æž¶ã€‚')]),t._v(" "),s("p",[t._v('ç»“æžœæ˜¯åˆ›å»ºäº†ä¸€ä¸ª"'),s("a",{attrs:{href:"https://docs.microsoft.com/en-us/aspnet/core/fundamentals/host/generic-host?view=aspnetcore-6.0&viewFallbackFrom=aspnetcore-3.0",target:"_blank",rel:"noopener noreferrer"}},[t._v("é€šç”¨ä¸»æœº"),s("OutboundLink")],1),t._v('"ï¼ˆè€Œä¸æ˜¯Webä¸»æœºï¼‰ï¼Œå¹¶åœ¨å…¶ä¸Šå¯¹ ASP.NET æ ¸å¿ƒå †æ ˆè¿›è¡Œäº†"é‡æ–°å¹³å°åŒ–"ã€‚æ²¡æœ‰'),s("code",[t._v("IWebHostBuilder")]),t._v("ï¼Œè€Œæ˜¯"),s("code",[t._v("IHostBuilder")]),t._v("ã€‚")]),t._v(" "),s("blockquote",[s("p",[t._v("åŒæ ·ï¼Œå¦‚æžœæ‚¨æœ‰å…´è¶£ï¼Œæˆ‘æœ‰"),s("a",{attrs:{href:"https://andrewlock.net/exploring-the-new-project-file-program-and-the-generic-host-in-asp-net-core-3/",target:"_blank",rel:"noopener noreferrer"}},[t._v("ä¸€ç³»åˆ—å…³äºŽæ­¤è¿ç§»çš„åŒæœŸæ–‡ç« "),s("OutboundLink")],1),t._v("ï¼")])]),t._v(" "),s("p",[t._v("æ­¤æ›´æ”¹å¯¼è‡´äº†ä¸€äº›ä¸å¯é¿å…çš„é‡å¤§æ›´æ”¹ï¼Œä½† ASP.NET å›¢é˜Ÿå°½æœ€å¤§åŠªåŠ›ä¸ºé’ˆå¯¹"),s("code",[t._v("IWebHostBuilder")]),t._v("è€Œä¸æ˜¯"),s("code",[t._v("IHostBuilder")]),t._v("ç¼–å†™çš„æ‰€æœ‰ä»£ç æä¾›è·¯ç”±ã€‚å…¶ä¸­ä¸€ç§è§£å†³æ–¹æ³•æ˜¯åœ¨"),s("em",[t._v("Program.cs")]),t._v("æ¨¡æ¿ä¸­é»˜è®¤ä½¿ç”¨çš„ "),s("code",[t._v("ConfigureWebHostDefaults")]),t._v("() æ–¹æ³•ï¼š")]),t._v(" "),s("div",{staticClass:"language-csharp line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-csharp"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Program")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token return-type class-name"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("string")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")])]),t._v(" args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("CreateHostBuilder")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Build")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Run")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token return-type class-name"}},[t._v("IHostBuilder")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("CreateHostBuilder")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("string")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")])]),t._v(" args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v("\n        Host"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("CreateDefaultBuilder")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ConfigureWebHostDefaults")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("webBuilder "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                webBuilder"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token generic-method"}},[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("UseStartup")]),s("span",{pre:!0,attrs:{class:"token generic class-name"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("Startup"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" \n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br")])]),s("p",[s("code",[t._v("ConfigureWebHostDefaults")]),t._v(" éœ€è¦æ³¨å†Œ ASP.NET Core åº”ç”¨çš„ "),s("code",[t._v("Startup")]),t._v(" ç±»ï¼Œè¿™è¡¨æ˜Ž .NET å›¢é˜Ÿåœ¨æä¾›ä»Ž "),s("code",[t._v("IWebHostBuilder")]),t._v(" åˆ° "),s("code",[t._v("IHostBuilder")]),t._v(" çš„è¿ç§»è·¯å¾„æ–¹é¢é¢ä¸´ä¸€ä¸ªæŒ‘æˆ˜ã€‚"),s("code",[t._v("Startup")]),t._v("ä¸Ž Web åº”ç”¨å¯†ä¸å¯åˆ†ï¼Œå› ä¸º "),s("code",[t._v("Configure")]),t._v('() æ–¹æ³•ä¸Žé…ç½®ä¸­é—´ä»¶æœ‰å…³ã€‚ä½†æ˜¯WorkeræœåŠ¡å’Œè®¸å¤šå…¶ä»–åº”ç”¨æ²¡æœ‰ä¸­é—´ä»¶ï¼Œå› æ­¤ Startup ç±»æˆä¸º"é€šç”¨ä¸»æœº"çº§åˆ«æ¦‚å¿µæ˜¯æ²¡æœ‰æ„ä¹‰çš„ã€‚')]),t._v(" "),s("p",[t._v("è¿™å°±æ˜¯"),s("code",[t._v("IHostBuilder")]),t._v("ä¸Šçš„"),s("code",[t._v("ConservationWebHostDefaults")]),t._v("()æ‰©å±•æ–¹æ³•çš„ç”¨æ­¦ä¹‹åœ°ã€‚æ­¤æ–¹æ³•å°† "),s("code",[t._v("IHostBuilder")]),t._v(" åŒ…è£…åœ¨ä¸€ä¸ªå†…éƒ¨ç±» "),s("code",[t._v("GenericWebHostBuilder")]),t._v(" ä¸­ï¼Œå¹¶è®¾ç½® "),s("code",[t._v("WebHost.CreateDefaultBuilder")]),t._v("() åœ¨ ASP.NET Core 2.1 ä¸­æ‰§è¡Œçš„æ‰€æœ‰é»˜è®¤å€¼ã€‚"),s("code",[t._v("GenericWebHostBuilder")]),t._v(" å……å½“æ—§çš„ "),s("code",[t._v("IWebHostBuilder")]),t._v(" å’Œæ–°çš„ "),s("code",[t._v("IHostBuilder")]),t._v(" ä¹‹é—´çš„é€‚é…å™¨ã€‚")]),t._v(" "),s("p",[t._v("ASP.NET Core 3.xçš„å¦ä¸€ä¸ªé‡å¤§å˜åŒ–æ˜¯å¼•å…¥äº†ç»ˆç»“ç‚¹è·¯ç”±ã€‚ç»ˆç»“ç‚¹è·¯ç”±æ˜¯ä½¿æ¦‚å¿µå¯ç”¨çš„ç¬¬ä¸€æ¬¡å°è¯•ä¹‹ä¸€ï¼Œè¿™äº›æ¦‚å¿µä»¥å‰ä»…é™äºŽ ASP.NET Coreçš„MVCéƒ¨åˆ†ï¼Œåœ¨æœ¬ä¾‹ä¸­ä¸ºè·¯ç”±æ¦‚å¿µã€‚è¿™éœ€è¦å¯¹ä¸­é—´ä»¶ç®¡é“è¿›è¡Œä¸€äº›é‡æ–°æ€è€ƒï¼Œä½†åœ¨è®¸å¤šæƒ…å†µä¸‹ï¼Œå¿…è¦çš„æ›´æ”¹æ˜¯æœ€å°çš„ã€‚")]),t._v(" "),s("blockquote",[s("p",[s("a",{attrs:{href:"https://andrewlock.net/converting-a-terminal-middleware-to-endpoint-routing-in-aspnetcore-3/#the-evolution-of-routing",target:"_blank",rel:"noopener noreferrer"}},[t._v("æˆ‘ä¹‹å‰å†™è¿‡ä¸€ç¯‡æ–‡ç« ï¼Œæ›´æ·±å…¥åœ°ä»‹ç»äº†ç«¯ç‚¹è·¯ç”±ï¼ŒåŒ…æ‹¬å¦‚ä½•å°†ä¸­é—´ä»¶è½¬æ¢ä¸ºä½¿ç”¨ç«¯ç‚¹è·¯ç”±ã€‚"),s("OutboundLink")],1)])]),t._v(" "),s("p",[t._v("å°½ç®¡æœ‰è¿™äº›å˜åŒ–ï¼ŒASP.NET Core 3.xä¸­çš„"),s("code",[t._v("Startup")]),t._v("ç±»çœ‹èµ·æ¥ä¸Ž2.xç‰ˆæœ¬éžå¸¸ç›¸ä¼¼ã€‚ä¸‹é¢çš„ç¤ºä¾‹å‡ ä¹Žç­‰åŒäºŽ 2.x ç‰ˆæœ¬ï¼ˆä¸è¿‡æˆ‘å·²åˆ‡æ¢åˆ° Razor Pages è€Œä¸æ˜¯ MVCï¼‰ã€‚")]),t._v(" "),s("div",{staticClass:"language-csharp line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-csharp"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Startup")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Startup")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IConfiguration")]),t._v(" configuration"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        Configuration "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" configuration"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token return-type class-name"}},[t._v("IConfiguration")]),t._v(" Configuration "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token return-type class-name"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ConfigureServices")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IServiceCollection")]),t._v(" services"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        services"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("AddRazorPages")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ­¤æ–¹æ³•ç”±è¿è¡Œæ—¶è°ƒç”¨ã€‚ä½¿ç”¨æ­¤æ–¹æ³•é…ç½® HTTP è¯·æ±‚ç®¡é“ã€‚")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token return-type class-name"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Configure")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IApplicationBuilder")]),t._v(" app"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IWebHostEnvironment")]),t._v(" env"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("env"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("IsDevelopment")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            app"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("UseDeveloperExceptionPage")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n        app"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("UseStaticFiles")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        app"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("UseRouting")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        app"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("UseAuthorization")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        app"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("UseEndpoints")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("endpoints "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            endpoints"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("MapRazorPages")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br"),s("span",{staticClass:"line-number"},[t._v("30")]),s("br"),s("span",{staticClass:"line-number"},[t._v("31")]),s("br"),s("span",{staticClass:"line-number"},[t._v("32")]),s("br")])]),s("p",[t._v("ASP.NET Core 5ç»™çŽ°æœ‰åº”ç”¨ç¨‹åºå¸¦æ¥çš„å¤§æ”¹åŠ¨ç›¸å¯¹è¾ƒå°‘ï¼Œå› æ­¤ä»Ž3.xå‡çº§åˆ°5é€šå¸¸å°±åƒæ›´æ”¹ç›®æ ‡æ¡†æž¶å’Œæ›´æ–°ä¸€äº›NuGetåŒ…ä¸€æ ·ç®€å•ã€‚ðŸŽ‰")]),t._v(" "),s("p",[t._v("å¯¹äºŽ .NET 6ï¼Œå¦‚æžœè¦å‡çº§çŽ°æœ‰åº”ç”¨ç¨‹åºï¼Œå¸Œæœ›ä»ç„¶å¦‚æ­¤ã€‚ä½†å¯¹äºŽæ–°åº”ç”¨ï¼Œé»˜è®¤çš„å¼•å¯¼ä½“éªŒå·²å®Œå…¨æ”¹å˜...")]),t._v(" "),s("h2",{attrs:{id:"asp-net-æ ¸å¿ƒ6-webåº”ç”¨ç¨‹åºæž„å»ºå™¨"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#asp-net-æ ¸å¿ƒ6-webåº”ç”¨ç¨‹åºæž„å»ºå™¨"}},[t._v("#")]),t._v(" ASP.NET æ ¸å¿ƒ6ï¼šWebåº”ç”¨ç¨‹åºæž„å»ºå™¨")]),t._v(" "),s("p",[t._v("ä»¥å‰æ‰€æœ‰ç‰ˆæœ¬çš„ ASP.NET Core å·²å°†é…ç½®æ‹†åˆ†ä¸º 2 ä¸ªæ–‡ä»¶ã€‚åœ¨ .NET 6 ä¸­ï¼Œå¯¹ C#ã€BCL å’Œ ASP.NET Core çš„å¤§é‡æ›´æ”¹æ„å‘³ç€çŽ°åœ¨æ‰€æœ‰å†…å®¹éƒ½å¯ä»¥åœ¨å•ä¸ªæ–‡ä»¶ä¸­ã€‚")]),t._v(" "),s("blockquote",[s("p",[t._v("è¯·æ³¨æ„ï¼Œæ²¡æœ‰ä»€ä¹ˆèƒ½å¼ºåˆ¶æ‚¨ä½¿ç”¨æ­¤æ ·å¼ã€‚æˆ‘åœ¨ ASP.NET Core 3.x/5 ä»£ç ä¸­æ˜¾ç¤ºçš„æ‰€æœ‰ä»£ç åœ¨ .NET 6 ä¸­ä»ç„¶æœ‰æ•ˆï¼")])]),t._v(" "),s("div",{staticClass:"language-csharp line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-csharp"}},[s("code",[s("span",{pre:!0,attrs:{class:"token class-name"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")])]),t._v(" builder "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" WebApplication"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("CreateBuilder")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nbuilder"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Services"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("AddRazorPages")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")])]),t._v(" app "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" builder"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Build")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("app"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Environment"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("IsDevelopment")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    app"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("UseDeveloperExceptionPage")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\napp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("UseStaticFiles")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\napp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("MapGet")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Hello World!"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\napp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("MapRazorPages")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\napp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Run")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br")])]),s("p",[t._v("è¿™é‡Œæœ‰å¾ˆå¤šå˜åŒ–ï¼Œä½†ä¸€äº›æœ€æ˜Žæ˜¾çš„æ˜¯ï¼š")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://docs.microsoft.com/zh-cn/dotnet/core/tutorials/top-level-templates",target:"_blank",rel:"noopener noreferrer"}},[t._v("é¡¶çº§è¯­å¥"),s("OutboundLink")],1),t._v("æ„å‘³ç€å¯ä»¥æ²¡æœ‰ "),s("code",[t._v("Program.Main()")]),t._v(" æ ·æ¿ã€‚")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://github.com/dotnet/sdk/issues/19521",target:"_blank",rel:"noopener noreferrer"}},[t._v("éšå¼ using æŒ‡ä»¤"),s("OutboundLink")],1),t._v("æ„å‘³ç€ä¸éœ€è¦ using è¯­å¥ã€‚æˆ‘æ²¡æœ‰å°†å®ƒä»¬åŒ…å«åœ¨ä»¥å‰ç‰ˆæœ¬çš„ä»£ç æ®µä¸­ï¼Œä½†æ˜¯.NET 6ä¸éœ€è¦å®ƒä»¬ï¼")]),t._v(" "),s("li",[t._v("æ— "),s("code",[t._v("Startup")]),t._v("ç±» - æ‰€æœ‰å†…å®¹éƒ½åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­ã€‚")])]),t._v(" "),s("p",[t._v("è¿™æ˜¾ç„¶æ˜¯å‡å°‘äº†å¾ˆå¤šä»£ç ï¼Œä½†è¿™æ˜¯å¿…è¦çš„å—ï¼Ÿå®ƒåªæ˜¯ä¸ºäº†å‡å°‘è€Œå‡å°‘å—ï¼Ÿå®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ")]),t._v(" "),s("h3",{attrs:{id:"æ‰€æœ‰ä»£ç éƒ½åŽ»å“ªå„¿äº†"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æ‰€æœ‰ä»£ç éƒ½åŽ»å“ªå„¿äº†"}},[t._v("#")]),t._v(" æ‰€æœ‰ä»£ç éƒ½åŽ»å“ªå„¿äº†ï¼Ÿ")]),t._v(" "),s("p",[t._v('.NET 6çš„ä¸€å¤§ç„¦ç‚¹æ˜¯"æ–°æ‰‹"çš„è§‚ç‚¹ã€‚ä½œä¸º ASP.NET Coreçš„åˆå­¦è€…ï¼Œæ‚¨å¿…é¡»å¿«é€ŸæŽŒæ¡å¤§é‡æ¦‚å¿µã€‚çœ‹çœ‹æˆ‘çš„ä¹¦çš„ç›®å½•;æœ‰å¾ˆå¤šäº‹æƒ…è¦è®©ä½ å¤´ç–¼ï¼')]),t._v(" "),s("p",[t._v('.NET 6 ä¸­çš„æ›´æ”¹ä¸»è¦é›†ä¸­åœ¨åˆ é™¤ä¸Žå…¥é—¨ç›¸å…³çš„"ä»ªå¼"ä¸Šï¼Œå¹¶éšè—äº†æ–°æ‰‹å¯èƒ½æ„Ÿåˆ°å›°æƒ‘çš„æ¦‚å¿µã€‚ä¾‹å¦‚ï¼š')]),t._v(" "),s("ul",[s("li",[t._v("å¼€å§‹æ—¶ä¸éœ€è¦ "),s("code",[t._v("using")]),t._v(" è¯­å¥ã€‚å°½ç®¡å·¥å…·åœ¨å®žè·µä¸­é€šå¸¸ä¸ä¼šä½¿è¿™äº›æˆä¸ºé—®é¢˜ï¼Œä½†åœ¨å¼€å§‹æ—¶ï¼Œå®ƒä»¬æ˜¾ç„¶æ˜¯ä¸€ä¸ªä¸å¿…è¦çš„æ¦‚å¿µã€‚")]),t._v(" "),s("li",[t._v("ä¸Žæ­¤ç±»ä¼¼ï¼Œ"),s("code",[t._v("namespace")]),t._v("åœ¨å¼€å§‹æ—¶æ˜¯ä¸€ä¸ªä¸å¿…è¦çš„æ¦‚å¿µã€‚")]),t._v(" "),s("li",[s("code",[t._v("Program.Main()")]),t._v("...ä¸ºä»€ä¹ˆå«è¿™ä¸ªåå­—ï¼Ÿä¸ºä»€ä¹ˆæˆ‘éœ€è¦å®ƒï¼Ÿå› ä¸ºä½ æœ‰ã€‚é™¤äº†çŽ°åœ¨ä½ æ²¡æœ‰ã€‚")]),t._v(" "),s("li",[t._v("é…ç½®ä¸ä¼šåœ¨ä¸¤ä¸ªæ–‡ä»¶ï¼ˆ"),s("em",[t._v("Program")]),t._v(".cså’Œ"),s("em",[t._v("Startup")]),t._v('.csä¹‹é—´æ‹†åˆ†ã€‚è™½ç„¶æˆ‘å–œæ¬¢è¿™ç§"å…³æ³¨ç‚¹çš„åˆ†ç¦»"ï¼Œä½†æˆ‘ä¸ä¼šé”™è¿‡è§£é‡Šä¸ºä»€ä¹ˆè¿™ç§åˆ†ç¦»å¯¹æ–°äººæ¥è¯´æ˜¯è¿™æ ·çš„ã€‚')]),t._v(" "),s("li",[t._v("å½“æˆ‘ä»¬è°ˆè®º"),s("code",[t._v("Startup")]),t._v('æ—¶ï¼Œæˆ‘ä»¬ä¸å†éœ€è¦è§£é‡Š"é­”æœ¯"æ–¹æ³•ï¼Œå³ä½¿å®ƒä»¬æ²¡æœ‰æ˜¾å¼å®žçŽ°æŽ¥å£ï¼Œä¹Ÿå¯ä»¥è°ƒç”¨å®ƒä»¬ã€‚')])]),t._v(" "),s("p",[t._v("æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜æœ‰æ–°çš„ "),s("code",[t._v("WebApplication")]),t._v(" å’Œ "),s("code",[t._v("WebApplicationBuilder")]),t._v(' ç±»åž‹ã€‚è¿™äº›ç±»åž‹å¹¶ä¸æ˜¯å®žçŽ°ä¸Šè¿°ç›®æ ‡æ‰€å¿…éœ€çš„ï¼Œä½†å®ƒä»¬ç¡®å®žæä¾›äº†æŸç§"æ›´å¹²å‡€"çš„é…ç½®ä½“éªŒã€‚')]),t._v(" "),s("h3",{attrs:{id:"æˆ‘ä»¬çœŸçš„éœ€è¦ä¸€ç§æ–°çš„ç±»åž‹å—"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æˆ‘ä»¬çœŸçš„éœ€è¦ä¸€ç§æ–°çš„ç±»åž‹å—"}},[t._v("#")]),t._v(" æˆ‘ä»¬çœŸçš„éœ€è¦ä¸€ç§æ–°çš„ç±»åž‹å—ï¼Ÿ")]),t._v(" "),s("p",[t._v("å¥½å§ï¼Œä¸ï¼Œæˆ‘ä»¬ä¸éœ€è¦å®ƒã€‚æˆ‘ä»¬å¯ä»¥ç¼–å†™ä¸€ä¸ª .NET 6 åº”ç”¨ï¼Œè¯¥åº”ç”¨ä¸Žä½¿ç”¨é€šç”¨ä¸»æœºçš„ä¸Šè¿°ç¤ºä¾‹éžå¸¸ç›¸ä¼¼ï¼š")]),t._v(" "),s("div",{staticClass:"language-csharp line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-csharp"}},[s("code",[s("span",{pre:!0,attrs:{class:"token class-name"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")])]),t._v(" hostBuilder "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Host"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("CreateDefaultBuilder")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ConfigureServices")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("services "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" \n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        services"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("AddRazorPages")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ConfigureWebHostDefaults")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("webBuilder "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        webBuilder"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Configure")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ctx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" app"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" \n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ctx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("HostingEnvironment"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("IsDevelopment")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                app"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("UseDeveloperExceptionPage")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n            app"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("UseStaticFiles")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            app"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("UseRouting")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n            app"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("UseEndpoints")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("endpoints "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                endpoints"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("MapGet")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Hello World!"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                endpoints"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("MapRazorPages")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" \n\nhostBuilder"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Build")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Run")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br")])]),s("p",[t._v("æˆ‘è®¤ä¸ºä½ å¿…é¡»åŒæ„ï¼Œè¿™çœ‹èµ·æ¥æ¯”.NET 6 "),s("code",[t._v("WebApplication")]),t._v("ç‰ˆæœ¬å¤æ‚å¾—å¤šã€‚æˆ‘ä»¬æœ‰ä¸€å¤§å †åµŒå¥—çš„"),s("em",[t._v("lambda")]),t._v("ï¼Œä½ å¿…é¡»ç¡®ä¿ä½ å¾—åˆ°æ­£ç¡®çš„é‡è½½ï¼Œä»¥ä¾¿ä½ å¯ä»¥è®¿é—®é…ç½®ï¼ˆä¾‹å¦‚ï¼‰ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œå®ƒå°†ï¼ˆä¸»è¦æ˜¯ï¼‰è¿‡ç¨‹å¼•å¯¼è„šæœ¬å˜æˆæ›´å¤æ‚çš„ä¸œè¥¿ã€‚")]),t._v(" "),s("blockquote",[s("p",[s("code",[t._v("WebApplicationBuilder")]),t._v("çš„å¦ä¸€ä¸ªå¥½å¤„æ˜¯ï¼Œå¯åŠ¨æœŸé—´çš„å¼‚æ­¥ä»£ç è¦ç®€å•å¾—å¤šã€‚æ‚¨å¯ä»¥éšæ—¶è°ƒç”¨å¼‚æ­¥æ–¹æ³•ã€‚è¿™åº”è¯¥æœ‰æœ›ä½¿æˆ‘"),s("a",{attrs:{href:"https://andrewlock.net/running-async-tasks-on-app-startup-in-asp-net-core-part-1/",target:"_blank",rel:"noopener noreferrer"}},[t._v("åœ¨ ASP.NET Core 3.x/5ä¸­å†™çš„è¿™ä¸ªç³»åˆ—"),s("OutboundLink")],1),t._v("è¿‡æ—¶ï¼")])]),t._v(" "),s("p",[t._v("å…³äºŽ"),s("code",[t._v("WebApplicationBuilder")]),t._v("å’Œ"),s("code",[t._v("WebApplication")]),t._v("çš„å·§å¦™ä¹‹å¤„åœ¨äºŽï¼Œå®ƒä»¬æœ¬è´¨ä¸Šç­‰åŒäºŽä¸Šé¢çš„é€šç”¨ä¸»æœºè®¾ç½®ï¼Œä½†å®ƒä»¬ä½¿ç”¨å¯ä»¥è¯´æ˜¯æ›´ç®€å•çš„APIæ¥å®Œæˆçš„ã€‚")]),t._v(" "),s("h3",{attrs:{id:"å¤§å¤šæ•°é…ç½®å‘ç”Ÿåœ¨webapplicationbuilderä¸­"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å¤§å¤šæ•°é…ç½®å‘ç”Ÿåœ¨webapplicationbuilderä¸­"}},[t._v("#")]),t._v(" å¤§å¤šæ•°é…ç½®å‘ç”Ÿåœ¨WebApplicationBuilderä¸­")]),t._v(" "),s("p",[t._v("è®©æˆ‘ä»¬ä»ŽWebApplicationBuilderå¼€å§‹ã€‚")]),t._v(" "),s("div",{staticClass:"language-csharp line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-csharp"}},[s("code",[s("span",{pre:!0,attrs:{class:"token class-name"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")])]),t._v(" builder "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" WebApplication"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("CreateBuilder")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nbuilder"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Services"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("AddRazorPages")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("p",[s("a",{attrs:{href:"https://github.com/dotnet/aspnetcore/blob/9aff0545632a2165acc743b0ae92c438bc273806/src/DefaultBuilder/src/WebApplicationBuilder.cs",target:"_blank",rel:"noopener noreferrer"}},[t._v("WebApplicationBuilderè´Ÿè´£4ä¸ªä¸»è¦çš„äº‹æƒ…ï¼š"),s("OutboundLink")],1)]),t._v(" "),s("ul",[s("li",[t._v("ä½¿ç”¨"),s("code",[t._v("builder.Configuration")]),t._v("æ·»åŠ é…ç½®")]),t._v(" "),s("li",[t._v("ä½¿ç”¨"),s("code",[t._v("builder.Services")]),t._v("æ·»åŠ æœåŠ¡")]),t._v(" "),s("li",[t._v("ä½¿ç”¨"),s("code",[t._v("builder.Logging")]),t._v("é…ç½®æ—¥å¿—")]),t._v(" "),s("li",[t._v("ç”Ÿæˆ IHostBuilder å’Œ IWebHostBuilder é…ç½®")])]),t._v(" "),s("p",[t._v("ä¾æ¬¡æ¥åˆ†æžæ¯ä¸€ä¸ª...")]),t._v(" "),s("p",[s("code",[t._v("WebApplicationBuilder")]),t._v(" å…¬å¼€äº† "),s("code",[t._v("ConfigurationManager")]),t._v(" ç±»åž‹ï¼Œç”¨äºŽæ·»åŠ æ–°çš„é…ç½®æºä»¥åŠè®¿é—®é…ç½®å€¼ï¼Œ"),s("RouterLink",{attrs:{to:"/blogs/2022/exploring-dotnet-6/part-1-looking-inside-configurationmanager-in-dotnet-6.html"}},[t._v("å¦‚æˆ‘åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­æ‰€è¿°")]),t._v("ã€‚")],1),t._v(" "),s("p",[t._v("å®ƒè¿˜å…¬å¼€ä¸€ä¸ª "),s("code",[t._v("IServiceCollection")]),t._v("ï¼Œç”¨äºŽå°†æœåŠ¡æ·»åŠ åˆ° DI å®¹å™¨ã€‚å› æ­¤ï¼Œå¯¹äºŽé€šç”¨ä¸»æœºï¼Œæ‚¨å¿…é¡»æ‰§è¡Œä»¥ä¸‹æ“ä½œ")]),t._v(" "),s("div",{staticClass:"language-csharp line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-csharp"}},[s("code",[s("span",{pre:!0,attrs:{class:"token class-name"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")])]),t._v(" hostBuilder "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Host"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("CreateDefaultBuilder")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nhostBuilder"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ConfigureServices")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("services "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" \n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        services"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("AddRazorPages")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        services"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token generic-method"}},[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("AddSingleton")]),s("span",{pre:!0,attrs:{class:"token generic class-name"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("MyThingy"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br")])]),s("p",[t._v("ä½¿ç”¨"),s("code",[t._v("WebApplicationBuilder")]),t._v("ï¼Œä½ å¯ä»¥è¿™æ ·åš")]),t._v(" "),s("div",{staticClass:"language-csharp line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-csharp"}},[s("code",[s("span",{pre:!0,attrs:{class:"token class-name"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")])]),t._v(" builder "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" WebApplication"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("CreateBuilder")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nbuilder"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Services"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("AddRazorPages")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nbuilder"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Services"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token generic-method"}},[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("AddSingleton")]),s("span",{pre:!0,attrs:{class:"token generic class-name"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("MyThingy"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br")])]),s("p",[t._v("åŒæ ·ï¼Œå¯¹äºŽæ—¥å¿—è®°å½•ï¼Œè€Œä¸æ˜¯è¿™æ ·åš")]),t._v(" "),s("div",{staticClass:"language-csharp line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-csharp"}},[s("code",[s("span",{pre:!0,attrs:{class:"token class-name"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")])]),t._v(" hostBuilder "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Host"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("CreateDefaultBuilder")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nhostBuilder"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ConfigureLogging")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("builder "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" \n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        builder"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("AddFile")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br")])]),s("p",[t._v("ä½ å¯ä»¥è¿™æ ·åšï¼š")]),t._v(" "),s("div",{staticClass:"language-csharp line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-csharp"}},[s("code",[s("span",{pre:!0,attrs:{class:"token class-name"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")])]),t._v(" builder "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" WebApplication"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("CreateBuilder")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nbuilder"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Logging"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("AddFile")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("p",[t._v("è¿™å…·æœ‰å®Œå…¨ç›¸åŒçš„è¡Œä¸ºï¼Œåªæ˜¯åœ¨æ›´æ˜“äºŽä½¿ç”¨çš„APIä¸­ã€‚å¯¹äºŽé‚£äº›ç›´æŽ¥ä¾èµ– "),s("code",[t._v("IHostBuilder")]),t._v(" æˆ– "),s("code",[t._v("IWebHostBuilder")]),t._v(" çš„æ‰©å±•ç‚¹ï¼Œ"),s("code",[t._v("WebApplicationBuilder")]),t._v(" åˆ†åˆ«å…¬å¼€å±žæ€§ "),s("code",[t._v("Host")]),t._v(" å’Œ "),s("code",[t._v("WebHost")]),t._v("ã€‚")]),t._v(" "),s("p",[t._v("ä¾‹å¦‚ï¼ŒSerilogçš„ ASP.NET Coreé›†æˆä¸Ž"),s("code",[t._v("IHostBuilder")]),t._v("æŒ‚é’©ï¼Œå› æ­¤åœ¨ ASP.NET Core 3.x/5ä¸­ï¼Œæ‚¨å°†ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ·»åŠ å®ƒï¼š")]),t._v(" "),s("div",{staticClass:"language-csharp line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-csharp"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token return-type class-name"}},[t._v("IHostBuilder")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("CreateHostBuilder")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("string")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")])]),t._v(" args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v("\n    Host"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("CreateDefaultBuilder")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("UseSerilog")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// <-- æ·»åŠ æ­¤è¡Œ")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ConfigureWebHostDefaults")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("webBuilder "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            webBuilder"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token generic-method"}},[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("UseStartup")]),s("span",{pre:!0,attrs:{class:"token generic class-name"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("Startup"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br")])]),s("p",[t._v("ä½¿ç”¨ "),s("code",[t._v("WebApplicationBuilder")]),t._v("ï¼Œæ‚¨å°†åœ¨ Host å±žæ€§ä¸Šè°ƒç”¨ "),s("code",[t._v("UseSerilog()")]),t._v("ï¼Œè€Œä¸æ˜¯åœ¨ç”Ÿæˆå™¨æœ¬èº«ä¸Šè¿›è¡Œè°ƒç”¨ï¼š")]),t._v(" "),s("div",{staticClass:"language-csharp line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-csharp"}},[s("code",[t._v("builder"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Host"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("UseSerilog")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("å®žé™…ä¸Šï¼Œ"),s("code",[t._v("WebApplicationBuilder")]),t._v("æ˜¯æ‚¨æ‰§è¡Œé™¤ä¸­é—´ä»¶ç®¡é“ä¹‹å¤–çš„æ‰€æœ‰é…ç½®çš„åœ°æ–¹ã€‚")]),t._v(" "),s("h3",{attrs:{id:"webapplication-æ‹…ä»»å¤šé¡¹ä»»åŠ¡"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#webapplication-æ‹…ä»»å¤šé¡¹ä»»åŠ¡"}},[t._v("#")]),t._v(" WebApplication æ‹…ä»»å¤šé¡¹ä»»åŠ¡")]),t._v(" "),s("p",[t._v("åœ¨ "),s("code",[t._v("WebApplicationBuilder")]),t._v(" ä¸Šé…ç½®å®Œæ‰€æœ‰éœ€è¦å®Œæˆçš„å†…å®¹åŽï¼Œæ‚¨å¯ä»¥è°ƒç”¨ "),s("code",[t._v("Build()")]),t._v(" æ¥åˆ›å»º "),s("code",[t._v("WebApplication")]),t._v(" çš„å®žä¾‹ï¼š")]),t._v(" "),s("div",{staticClass:"language-csharp line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-csharp"}},[s("code",[s("span",{pre:!0,attrs:{class:"token class-name"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")])]),t._v(" app "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" builder"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Build")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[s("code",[t._v("WebApplication")]),t._v("å¾ˆæœ‰è¶£ï¼Œå› ä¸ºå®ƒå®žçŽ°äº†å¤šä¸ªä¸åŒçš„æŽ¥å£ï¼š")]),t._v(" "),s("ul",[s("li",[t._v("IHost - "),s("a",{attrs:{href:"https://github.com/dotnet/runtime/blob/f29484a8681d67e5605fcf86d56f7d46e18f4396/src/libraries/Microsoft.Extensions.Hosting.Abstractions/src/IHost.cs#L13-L13",target:"_blank",rel:"noopener noreferrer"}},[t._v("ç”¨äºŽå¯åŠ¨å’Œåœæ­¢ä¸»æœº"),s("OutboundLink")],1)]),t._v(" "),s("li",[t._v("IApplicationBuilder - "),s("a",{attrs:{href:"https://github.com/dotnet/aspnetcore/blob/e6a5af6633f08890afbd99a6ca7687c623454768/src/Http/Http.Abstractions/src/IApplicationBuilder.cs",target:"_blank",rel:"noopener noreferrer"}},[t._v("ç”¨äºŽæž„å»ºä¸­é—´ä»¶ç®¡é“"),s("OutboundLink")],1)]),t._v(" "),s("li",[t._v("IEndpointRouteBuilder - "),s("a",{attrs:{href:"https://github.com/dotnet/aspnetcore/blob/e6a5af6633f08890afbd99a6ca7687c623454768/src/Http/Routing/src/IEndpointRouteBuilder.cs",target:"_blank",rel:"noopener noreferrer"}},[t._v("ç”¨äºŽæ·»åŠ ç»ˆç»“ç‚¹"),s("OutboundLink")],1)])]),t._v(" "),s("p",[t._v("åŽä¸¤ç‚¹éžå¸¸ç›¸å…³ã€‚åœ¨ ASP.NET Core 3.x å’Œ 5 ä¸­ï¼Œ"),s("code",[t._v("IEndpointRouteBuilder")]),t._v(" ç”¨äºŽé€šè¿‡è°ƒç”¨ "),s("code",[t._v("UseEndpoints()")]),t._v(" å¹¶å‘å…¶ä¼ é€’ "),s("em",[t._v("lambda")]),t._v(" æ¥æ·»åŠ ç»ˆç»“ç‚¹ï¼Œä¾‹å¦‚ï¼š")]),t._v(" "),s("div",{staticClass:"language-csharp line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-csharp"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token return-type class-name"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Configure")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IApplicationBuilder")]),t._v(" app"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    app"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("UseStaticFiles")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    app"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("UseRouting")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    app"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("UseEndpoints")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("endpoints "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        endpoints"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("MapRazorPages")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br")])]),s("p",[t._v("å¯¹äºŽåˆšæŽ¥è§¦ ASP.NET Core çš„äººæ¥è¯´ï¼Œæ­¤ .NET 3.x/5 æ¨¡å¼æœ‰ä¸€äº›å¤æ‚æ€§ï¼š")]),t._v(" "),s("ul",[s("li",[t._v("ä¸­é—´ä»¶ç®¡é“æž„å»ºå‘ç”Ÿåœ¨"),s("code",[t._v("Startup")]),t._v("ä¸­çš„ "),s("code",[t._v("Configure()")]),t._v(" å‡½æ•°ä¸­ï¼ˆä½ å¿…é¡»çŸ¥é“è¦çœ‹é‚£é‡Œï¼‰")]),t._v(" "),s("li",[t._v("æ‚¨å¿…é¡»ç¡®ä¿è°ƒç”¨"),s("code",[t._v("app.UseEndpoints()")]),t._v("ä¹‹å‰å…ˆè°ƒç”¨"),s("code",[t._v("app.UseRouting()")]),t._v("ï¼ˆä»¥åŠå°†å…¶ä»–ä¸­é—´ä»¶æ”¾åœ¨æ­£ç¡®çš„ä½ç½®ï¼‰")]),t._v(" "),s("li",[t._v("æ‚¨å¿…é¡»ä½¿ç”¨ "),s("em",[t._v("lambda")]),t._v(" æ¥é…ç½®ç»ˆèŠ‚ç‚¹ï¼ˆå¯¹äºŽç†Ÿæ‚‰ C# çš„ç”¨æˆ·æ¥è¯´å¹¶ä¸å¤æ‚ï¼Œä½†æ–°æ‰‹å¯èƒ½ä¼šæ„Ÿåˆ°å›°æƒ‘ï¼‰")])]),t._v(" "),s("p",[s("code",[t._v("WebApplication")]),t._v("æ˜¾è‘—ç®€åŒ–äº†æ­¤æ¨¡å¼ï¼š")]),t._v(" "),s("div",{staticClass:"language-csharp line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-csharp"}},[s("code",[t._v("app"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("UseStaticFiles")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\napp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("MapRazorPages")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("p",[t._v('è¿™æ˜¾ç„¶è¦ç®€å•å¾—å¤šï¼Œå°½ç®¡æˆ‘å‘çŽ°å®ƒæœ‰ç‚¹ä»¤äººå›°æƒ‘ï¼Œå› ä¸ºä¸­é—´ä»¶å’Œç»ˆç»“ç‚¹ä¹‹é—´çš„åŒºåˆ«è¿œä¸å¦‚.NET 5.xç­‰ä¸­é‚£ä¹ˆæ¸…æ™°ã€‚è¿™å¯èƒ½åªæ˜¯ä¸€ä¸ªå‘³é“é—®é¢˜ï¼Œä½†æˆ‘è®¤ä¸ºå®ƒæ··æ·†äº†"è®¢å•å¾ˆé‡è¦"çš„ä¿¡æ¯ï¼ˆè¿™é€‚ç”¨äºŽä¸­é—´ä»¶ï¼Œä½†é€šå¸¸ä¸é€‚ç”¨äºŽç»ˆç»“ç‚¹ï¼‰ã€‚')]),t._v(" "),s("p",[t._v("æˆ‘è¿˜æ²¡æœ‰å±•ç¤ºçš„æ˜¯"),s("code",[t._v("WebApplication")]),t._v("å’ŒWebApplicationBuilderå¦‚ä½•æž„å»ºçš„å…·ä½“ç»†èŠ‚ã€‚åœ¨ä¸‹ä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å°†æ­å¼€å¸·å¹•ï¼Œä»¥ä¾¿æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å¹•åŽåˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆã€‚")]),t._v(" "),s("h2",{attrs:{id:"æ€»ç»“"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æ€»ç»“"}},[t._v("#")]),t._v(" æ€»ç»“")]),t._v(" "),s("p",[t._v("åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘æè¿°äº† ASP.NET Coreåº”ç”¨ç¨‹åºçš„å¼•å¯¼å¦‚ä½•ä»Ž2.xç‰ˆæœ¬ä¸€ç›´æ›´æ”¹ä¸º.NET 6ã€‚æˆ‘å±•ç¤ºäº† .NET 6 ä¸­å¼•å…¥çš„æ–° "),s("code",[t._v("WebApplication")]),t._v(" å’Œ "),s("code",[t._v("WebApplicationBuilder")]),t._v(" ç±»åž‹ï¼Œè®¨è®ºäº†å¼•å…¥å®ƒä»¬çš„åŽŸå› ï¼Œä»¥åŠå®ƒä»¬å¸¦æ¥çš„ä¸€äº›ä¼˜åŠ¿ã€‚æœ€åŽï¼Œæˆ‘è®¨è®ºäº†è¿™ä¸¤ä¸ªç±»æ‰€æ‰®æ¼”çš„ä¸åŒè§’è‰²ï¼Œä»¥åŠå®ƒä»¬çš„ API å¦‚ä½•ç®€åŒ–å¯åŠ¨ä½“éªŒã€‚åœ¨ä¸‹ä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å°†æŸ¥çœ‹ç±»åž‹èƒŒåŽçš„ä¸€äº›ä»£ç ï¼Œä»¥äº†è§£å®ƒä»¬çš„å·¥ä½œåŽŸç†ã€‚")]),t._v(" "),s("br"),t._v(" "),s("br"),t._v(" "),s("br"),t._v(" "),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"title"}),s("p",[t._v("ä½œè€…ï¼šGerry Ge")]),t._v(" "),s("p",[t._v("å‡ºå¤„ï¼šç¿»è¯‘è‡³ "),s("a",{attrs:{href:"https://andrewlock.net/exploring-dotnet-6-part-2-comparing-webapplicationbuilder-to-the-generic-host/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Comparing WebApplicationBuilder to the Generic Host"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("ç‰ˆæƒï¼šæœ¬ä½œå“é‡‡ç”¨ã€Œ"),s("a",{attrs:{href:"https://creativecommons.org/licenses/by-nc-sa/4.0/",target:"_blank",rel:"noopener noreferrer"}},[t._v("ç½²å-éžå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…"),s("OutboundLink")],1),t._v("ã€è®¸å¯åè®®è¿›è¡Œè®¸å¯ã€‚")]),t._v(" "),s("p",[s("strong",[t._v("è½¬è½½è¯·æ³¨æ˜Žå‡ºå¤„")])])])],1)}),[],!1,null,null,null);s.default=e.exports}}]);